package wan.projectimport android.view.ViewGroupimport android.widget.TextViewimport androidx.recyclerview.widget.ListAdapterimport androidx.recyclerview.widget.RecyclerViewimport troll.btc.extensions.layoutInflaterimport troll.btc.extensions.onClickimport troll.eth.base.rv.BaseDiffUtilimport wan.project.bean.ProjectTreeimport wan.project.databinding.LayoutItemProjectBinding/** * author : TangPeng * date : 3/4/22 15:37 * description : */class ProjectAdapter(private val click: (ProjectTree) -> Unit) :    ListAdapter<ProjectTree, ProjectAdapter.ProjectVH>(ProjectDiff) {    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ProjectVH {        val bd =            LayoutItemProjectBinding.inflate(parent.context.layoutInflater(), parent, false)        return ProjectVH(bd, click)    }    override fun onBindViewHolder(holder: ProjectVH, position: Int) {        holder.bind(getItem(position))    }    class ProjectVH(        bd: LayoutItemProjectBinding,        val onClick: (ProjectTree) -> Unit    ) : RecyclerView.ViewHolder(bd.root) {        private var data: ProjectTree? = null        private val btn: TextView = bd.projectButton        init {//            bd.root.onClick { data?.let { onClick(it) } }        }        fun bind(data: ProjectTree) {            this.data = data            btn.text = data.name            btn.onClick {                data.let {                    onClick(it)                }            }        }    }}object ProjectDiff : BaseDiffUtil<ProjectTree>() {    override fun areContentsTheSame(oldItem: ProjectTree, newItem: ProjectTree): Boolean {        return oldItem.id == newItem.id    }}