package wan.projectimport android.view.LayoutInflaterimport androidx.fragment.app.viewModelsimport androidx.lifecycle.Lifecycleimport androidx.lifecycle.flowWithLifecycleimport androidx.lifecycle.lifecycleScopeimport androidx.recyclerview.widget.LinearLayoutManagerimport com.alibaba.android.arouter.launcher.ARouterimport kotlinx.coroutines.launchimport wan.common.CommonFragmentimport wan.common.RoutePathimport wan.common.RouterKeyimport wan.common.launchWithLoadingimport wan.project.databinding.FragmentProjectBinding/** * author : TangPeng * date : 3/2/22 15:28 * description : 项目 */class ProjectFragment : CommonFragment<FragmentProjectBinding>() {    private val vm: ProjectViewModel by viewModels()    private val adapter = ProjectAdapter {        ARouter.getInstance().build(RoutePath.PROJECT_TREE).withInt(RouterKey.ID, it.id)            .navigation()    }    override fun getBinding(inflater: LayoutInflater): FragmentProjectBinding =        FragmentProjectBinding.inflate(inflater)    override fun flowData() {        launchWithLoading(vm::getProjectTree)        lifecycleScope.launch {            vm.projectTreeState.flowWithLifecycle(lifecycle, Lifecycle.State.STARTED).collect {                adapter.submitList(it)            }        }    }    override fun flowView() {        bd.projectRv.layoutManager = LinearLayoutManager(requireContext())        bd.projectRv.adapter = adapter    }}