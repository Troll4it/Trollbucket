package wan.home.viewmodelimport androidx.lifecycle.viewModelScopeimport kotlinx.coroutines.launchimport troll.btc.extensions.Liveimport troll.eth.base.viewbinding.BaseViewModelimport wan.home.bean.ArticleDataimport wan.home.bean.Bannerimport wan.home.repo.HomeRepo/** * author : TangPeng * date : 2/28/22 17:55 * description : */class HomeViewModel : BaseViewModel() {    private val repo = HomeRepo()    val liveArticle = Live<MutableList<ArticleData>>()    val liveBanner = Live<MutableList<Banner>>()    fun getHome(page: Int = 1) {        viewModelScope.launch {            liveArticle.value = repo.getHomeArticle(page).data?.datas?.toMutableList()            val data = repo.getBanner().data?.toMutableList()            liveBanner.value = mutableListOf<Banner>().apply {                add(Banner().apply {                    list = data                })            }        }    }    /**     * 获取文章首页     */    private fun getHomeArticle(page: Int = 1) {        viewModelScope.launch {            liveArticle.value = repo.getHomeArticle(page).data?.datas?.toMutableList()        }    }    /**     * 获取banner     */    private fun getBanner() {        viewModelScope.launch {            val data = repo.getBanner().data?.toMutableList()            liveBanner.value = mutableListOf<Banner>().apply {                add(Banner().apply {                    list = data                })            }        }    }}