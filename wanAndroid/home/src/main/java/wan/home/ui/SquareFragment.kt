package wan.home.uiimport android.view.LayoutInflaterimport androidx.fragment.app.viewModelsimport androidx.lifecycle.Lifecycleimport androidx.lifecycle.flowWithLifecycleimport androidx.lifecycle.lifecycleScopeimport com.alibaba.android.arouter.launcher.ARouterimport kotlinx.coroutines.launchimport wan.common.CommonFragmentimport wan.common.RoutePathimport wan.common.RouterKeyimport wan.common.launchWithLoadingimport wan.home.adapter.SquareAdapterimport wan.home.databinding.FragmentSquareBindingimport wan.home.viewmodel.SquareViewModel/** * author : TangPeng * date : 2/28/22 17:49 * description : 广场 */class SquareFragment : CommonFragment<FragmentSquareBinding>() {    override fun getBinding(inflater: LayoutInflater): FragmentSquareBinding =        FragmentSquareBinding.inflate(inflater)    private val vm: SquareViewModel by viewModels()    private val adapter = SquareAdapter {        ARouter.getInstance().build(RoutePath.WEB_ACTIVITY).withString(RouterKey.URL, it.link)            .withString(RouterKey.TITLE, it.title).navigation()    }    override fun flowData() {        launchWithLoading(vm::getSquare)        lifecycleScope.launch {            vm.uiState.flowWithLifecycle(lifecycle, Lifecycle.State.STARTED).collect {                adapter.submitList(it)            }        }    }    override fun flowView() {        bd.squareRv.adapter = adapter    }}