package wan.home.adapterimport android.view.LayoutInflaterimport android.view.ViewGroupimport android.widget.TextViewimport androidx.recyclerview.widget.DiffUtilimport androidx.recyclerview.widget.ListAdapterimport androidx.recyclerview.widget.RecyclerViewimport troll.btc.extensions.onClickimport wan.home.bean.SquareDataimport wan.home.databinding.LayoutItemHomeSquareBinding/** * author : TangPeng * date : 3/4/22 11:17 * description : */class SquareAdapter(private val onClick: (SquareData) -> Unit) :    ListAdapter<SquareData, SquareAdapter.SquareViewHolder>(SquareDiffCallback) {    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): SquareViewHolder {        val bd =            LayoutItemHomeSquareBinding.inflate(LayoutInflater.from(parent.context), parent, false)        return SquareViewHolder(bd, onClick)    }    override fun onBindViewHolder(holder: SquareViewHolder, position: Int) {        val item = getItem(position)        holder.bind(item)    }    class SquareViewHolder(        bd: LayoutItemHomeSquareBinding,        val onClick: (SquareData) -> Unit    ) : RecyclerView.ViewHolder(bd.root) {        private var currentArticle: SquareData? = null        private val tvTitle: TextView = bd.tvArticleTitle        private val tvAuthor: TextView = bd.tvArticleAuthor        private val tvTime: TextView = bd.tvHomeInfoTime        private val tvType: TextView = bd.btHealthInfoType        init {            bd.root.onClick { currentArticle?.let { onClick(it) } }        }        fun bind(data: SquareData) {            currentArticle = data            tvAuthor.text = data.author.ifEmpty {                data.shareUser            }            tvTime.text = data.niceDate            tvTitle.text = data.title            tvType.text = data.superChapterName        }    }}object SquareDiffCallback : DiffUtil.ItemCallback<SquareData>() {    override fun areItemsTheSame(oldItem: SquareData, newItem: SquareData): Boolean {        return oldItem == newItem    }    override fun areContentsTheSame(oldItem: SquareData, newItem: SquareData): Boolean {        return oldItem.courseId == newItem.courseId    }}