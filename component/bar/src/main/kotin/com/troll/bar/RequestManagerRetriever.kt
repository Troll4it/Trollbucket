//package com.troll.bar////import android.app.Activity//import android.os.Handler//import android.os.Looper//import android.os.Message//import androidx.fragment.app.FragmentActivity//import androidx.fragment.app.FragmentManager//import com.troll.bar.view.SupportRequestBarManagerFragment/////**// * author : TangPeng// * date : 8/8/22 17:05// * description :// *///class RequestManagerRetriever() : Handler.Callback {////    companion object {//        fun getInstance(): RequestManagerRetriever {//            return RequestManagerRetriever()//        }//    }////    var handler: Handler? = null////    private val notOnly = ".tag.notOnly."//    var tag = TrollBar.javaClass.name.plus(".")////    init {//        handler = Handler(Looper.getMainLooper(), this)//    }//////    fun get(activity: Activity, only: Boolean) {//        tag = tag.plus(activity.javaClass.name)//        if (only.not()) {//            tag.plus(System.identityHashCode(activity).toString())//                .plus(notOnly)//        }//        return if (activity is FragmentActivity) {//            return getSupportFragment(activity.supportFragmentManager, tag).get(activity)////        } else {////        }//    }////    override fun handleMessage(msg: Message): Boolean {//        val handled = true//        return handled//    }//////    private fun getSupportFragment(//        fm: FragmentManager,//        tag: String//    ): SupportRequestBarManagerFragment? {//        return getSupportFragment(fm, tag, false)//    }////    private fun getSupportFragment(//        fm: FragmentManager,//        tag: String,//        destroy: Boolean//    ): SupportRequestBarManagerFragment? {//        var fragment: SupportRequestBarManagerFragment? =//            fm.findFragmentByTag(tag) as SupportRequestBarManagerFragment?//        if (fragment == null) {//            fragment = mPendingSupportFragments.get(fm)//            if (fragment == null) {//                if (destroy) {//                    return null//                } else {//                    for (fmFragment in fm.fragments) {//                        if (fmFragment is SupportRequestBarManagerFragment) {//                            val oldTag = fmFragment.tag//                            if (oldTag == null) {//                                fm.beginTransaction().remove(fmFragment).commitAllowingStateLoss()//                            } else {//                                if (oldTag.contains(mNotOnly)) {//                                    fm.beginTransaction().remove(fmFragment)//                                        .commitAllowingStateLoss()//                                }//                            }//                        }//                    }//                }//                fragment = SupportRequestBarManagerFragment()//                mPendingSupportFragments.put(fm, fragment)//                fm.beginTransaction().add(fragment, tag).commitAllowingStateLoss()//                mHandler.obtainMessage(//                    RequestManagerRetriever.ID_REMOVE_SUPPORT_FRAGMENT_MANAGER,//                    fm//                ).sendToTarget()//            }//        }//        if (destroy) {//            if (mPendingSupportRemoveFragments.get(tag) == null) {//                mPendingSupportRemoveFragments.put(tag, fragment)//                fm.beginTransaction().remove(fragment).commitAllowingStateLoss()//                mHandler.obtainMessage(//                    RequestManagerRetriever.ID_REMOVE_SUPPORT_FRAGMENT_MANAGER_REMOVE,//                    tag//                ).sendToTarget()//            }//            return null//        }//        return fragment//    }//}